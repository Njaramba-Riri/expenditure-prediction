{% extends 'base.html' %}
{% import 'macros/pagination.html' as paginate %}

{% block title %}LetsGo | Features {% endblock %}

{% block content %}
{% include 'nav.html' %}
<section class="users">
    <div class="meza">
        <div class="heading">
            <h2>Submited Features<ion-icon name="clipboard-outline"></ion-icon></h2>
            <label>
                <input type="text" name="" id="search" placeholder="Search feature">
                <ion-icon name="search-outline"></ion-icon>
            </label>
        </div> 
        <div class="table-main">
            <table id="users">
                <thead>
                    <tr>
                        <th>Country</th>
                        <th>Age Group</th>
                        <th>Companion</th>
                        <th>Purpose</th>
                        <th>Activity</th>
                        <th>Info</th>
                        <th>Arrangement</th>
                        <th>Category</th>
                        <th>Proba</th>
                        <th>User</th>
                    </tr>                
                </thead>
                <tbody>
                    {% for feature in features %}
                        <tr> 
                            <td title="{{ feature.country }}">{{ feature.country | truncate(10) }}</td>
                            <td class="data">{{ feature.age_group }}</td>
                            <td class="data">{{ feature.travel_with }}</td>
                            <td class="data">{{ feature.purpose }}</td>
                            <td class="data">{{ feature.main_activity }}</td>
                            <td class="data">{{ feature.info_source }}</td>  
                            <td class="data">{{ feature.tour_arrangement }}</td> 
                            <td class="data">{{ feature.predicted_category }}</td>
                            <td class="data">{{ feature.probability | round(1) }} %</td>
                            {% if feature.user_id %}
                                {% for user in users %}
                                    {% if feature.user_id == user.id %}
                                        <td class="data">
                                            <a href="{{ url_for('.user_profile', username=user.username) }}">
                                                {{ user.username }}
                                            </a>
                                        </td>
                                    {% endif %}
                                {% endfor %}
                            {% else %}
                                <td style="color: brown;"><i class="fa fa-warning"></i> Anonymous</td>  
                            {% endif %}    
                            <!-- <td class="data">{{ moment(feature.date).fromNow() }}</td>          -->
                        </tr>
                    {% endfor %}
                </tbody>
            </table>            
        </div>
        <hr>
        <div class="paginate">
            {{ paginate.pagination_widget(pagination, '.features') }}
        </div>
    </div>
    <div class="prof-footer">
        <p>&copy;2024. <i class="fa fa-paper-plane"></i>LetsGo. All rights reseved.</p>
        <p>Made with <i class="fa fa-fire"></i> and<i class="fa fa-heart"></i>by LetsGo Team.</p>
    </div>            
</section>

{% endblock %}
